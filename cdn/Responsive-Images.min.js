(function(a,b){if(typeof exports==="object"&&exports){module.exports=b}else{if(typeof define==="function"&&define.amd){define(b)}else{a.Mustache=b}}})(this,function(){var v={};v.name="mustache.js";v.version="0.7.2";v.tags=["{{","}}"];v.Scanner=u;v.Context=s;v.Writer=q;var d=/\s*/;var m=/\s+/;var k=/\S/;var h=/\s*=/;var o=/\s*\}/;var t=/#|\^|\/|>|\{|&|=|!/;function p(y,x){return RegExp.prototype.test.call(y,x)}function g(x){return !p(k,x)}var l=Array.isArray||function(x){return Object.prototype.toString.call(x)==="[object Array]"};function f(x){return x.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function n(x){return String(x).replace(/[&<>"'\/]/g,function(y){return c[y]})}v.escape=n;function u(x){this.string=x;this.tail=x;this.pos=0}u.prototype.eos=function(){return this.tail===""};u.prototype.scan=function(y){var x=this.tail.match(y);if(x&&x.index===0){this.tail=this.tail.substring(x[0].length);this.pos+=x[0].length;return x[0]}return""};u.prototype.scanUntil=function(y){var x,z=this.tail.search(y);switch(z){case -1:x=this.tail;this.pos+=this.tail.length;this.tail="";break;case 0:x="";break;default:x=this.tail.substring(0,z);this.tail=this.tail.substring(z);this.pos+=z}return x};function s(x,y){this.view=x;this.parent=y;this.clearCache()}s.make=function(x){return x instanceof s?x:new s(x)};s.prototype.clearCache=function(){this._cache={}};s.prototype.push=function(x){return new s(x,this)};s.prototype.lookup=function(x){var A=this._cache[x];if(!A){if(x==="."){A=this.view}else{var z=this;while(z){if(x.indexOf(".")>0){var B=x.split("."),y=0;A=z.view;while(A&&y<B.length){A=A[B[y++]]}}else{A=z.view[x]}if(A!=null){break}z=z.parent}}this._cache[x]=A}if(typeof A==="function"){A=A.call(this.view)}return A};function q(){this.clearCache()}q.prototype.clearCache=function(){this._cache={};this._partialCache={}};q.prototype.compile=function(z,x){var y=this._cache[z];if(!y){var A=v.parse(z,x);y=this._cache[z]=this.compileTokens(A,z)}return y};q.prototype.compilePartial=function(y,A,x){var z=this.compile(A,x);this._partialCache[y]=z;return z};q.prototype.compileTokens=function(A,z){var y=e(A);var x=this;return function(B,D){if(D){if(typeof D==="function"){x._loadPartial=D}else{for(var C in D){x.compilePartial(C,D[C])}}}return y(x,s.make(B),z)}};q.prototype.render=function(z,x,y){return this.compile(z)(x,y)};q.prototype._section=function(x,y,F,E){var D=y.lookup(x);switch(typeof D){case"object":if(l(D)){var z="";for(var A=0,C=D.length;A<C;++A){z+=E(this,y.push(D[A]))}return z}return D?E(this,y.push(D)):"";case"function":var G=this;var B=function(I){return G.render(I,y)};var H=D.call(y.view,F,B);return H!=null?H:"";default:if(D){return E(this,y)}}return""};q.prototype._inverted=function(x,y,A){var z=y.lookup(x);if(!z||l(z)&&z.length===0){return A(this,y)}return""};q.prototype._partial=function(x,y){if(!(x in this._partialCache)&&this._loadPartial){this.compilePartial(x,this._loadPartial(x))}var z=this._partialCache[x];return z?z(y):""};q.prototype._name=function(x,y){var z=y.lookup(x);if(typeof z==="function"){z=z.call(y.view)}return z==null?"":String(z)};q.prototype._escaped=function(x,y){return v.escape(this._name(x,y))};function e(z){var x={};function y(A,D,C){if(!x[A]){var B=e(D);x[A]=function(F,E){return B(F,E,C)}}return x[A]}return function(G,E,F){var B="";var D,H;for(var C=0,A=z.length;C<A;++C){D=z[C];switch(D[0]){case"#":H=F.slice(D[3],D[5]);B+=G._section(D[1],E,H,y(C,D[4],F));break;case"^":B+=G._inverted(D[1],E,y(C,D[4],F));break;case">":B+=G._partial(D[1],E);break;case"&":B+=G._name(D[1],E);break;case"name":B+=G._escaped(D[1],E);break;case"text":B+=D[1];break}}return B}}function w(D){var y=[];var C=y;var E=[];var A;for(var z=0,x=D.length;z<x;++z){A=D[z];switch(A[0]){case"#":case"^":E.push(A);C.push(A);C=A[4]=[];break;case"/":var B=E.pop();B[5]=A[2];C=E.length>0?E[E.length-1][4]:y;break;default:C.push(A)}}return y}function a(C){var z=[];var B,y;for(var A=0,x=C.length;A<x;++A){B=C[A];if(B[0]==="text"&&y&&y[0]==="text"){y[1]+=B[1];y[3]=B[3]}else{y=B;z.push(B)}}return z}function r(x){return[new RegExp(f(x[0])+"\\s*"),new RegExp("\\s*"+f(x[1]))]}v.parse=function(O,D){O=O||"";D=D||v.tags;if(typeof D==="string"){D=D.split(m)}if(D.length!==2){throw new Error("Invalid tags: "+D.join(", "))}var I=r(D);var y=new u(O);var G=[];var E=[];var C=[];var P=false;var N=false;function M(){if(P&&!N){while(C.length){E.splice(C.pop(),1)}}else{C=[]}P=false;N=false}var z,x,H,J;while(!y.eos()){z=y.pos;H=y.scanUntil(I[0]);if(H){for(var K=0,L=H.length;K<L;++K){J=H.charAt(K);if(g(J)){C.push(E.length)}else{N=true}E.push(["text",J,z,z+1]);z+=1;if(J==="\n"){M()}}}z=y.pos;if(!y.scan(I[0])){break}P=true;x=y.scan(t)||"name";y.scan(d);if(x==="="){H=y.scanUntil(h);y.scan(h);y.scanUntil(I[1])}else{if(x==="{"){var F=new RegExp("\\s*"+f("}"+D[1]));H=y.scanUntil(F);y.scan(o);y.scanUntil(I[1]);x="&"}else{H=y.scanUntil(I[1])}}if(!y.scan(I[1])){throw new Error("Unclosed tag at "+y.pos)}if(x==="/"){if(G.length===0){throw new Error('Unopened section "'+H+'" at '+z)}var B=G.pop();if(B[1]!==H){throw new Error('Unclosed section "'+B[1]+'" at '+z)}}var A=[x,H,z,y.pos];E.push(A);if(x==="#"||x==="^"){G.push(A)}else{if(x==="name"||x==="{"||x==="&"){N=true}else{if(x==="="){D=H.split(m);if(D.length!==2){throw new Error("Invalid tags at "+z+": "+D.join(", "))}I=r(D)}}}}var B=G.pop();if(B){throw new Error('Unclosed section "'+B[1]+'" at '+y.pos)}return w(a(E))};var b=new q;v.clearCache=function(){return b.clearCache()};v.compile=function(y,x){return b.compile(y,x)};v.compilePartial=function(y,z,x){return b.compilePartial(y,z,x)};v.compileTokens=function(y,x){return b.compileTokens(y,x)};v.render=function(z,x,y){return b.render(z,x,y)};v.to_html=function(A,y,z,B){var x=v.render(A,y,z);if(typeof B==="function"){B(x)}else{return x}};return v}());function urlToFilename(b){return(!b)?"":b.substring(b.lastIndexOf("/")+1,(b.lastIndexOf("?")==-1)?b.length:b.lastIndexOf("?"))}function extractImgData(c){var b=[];var d=c.split("|");for(i in d){var g=d[i].split(","),e={};for(j in g){var f=g[j],a=(f.indexOf("w:")==0)?"w":((f.indexOf("sr:")===-1)?"s":"sr");e[a]=f.replace(a+":","").trim()}b.push(e)}return{images:b}}function render(){var c=[];$(".content").find("img.responsiveImage").each(function(){var m=$(this).data();c.push(extractImgData(m.responsive))});if(window.COLOR_DATA){for(var e in window.COLOR_DATA){var l=window.COLOR_DATA[e]["img"],a=$(jQuery.parseHTML(l)),b=a.data();c.push(extractImgData(b.responsive))}}var d={modules:c};var h="";h+="{{#modules}}";h+='	<table style="border-bottom: 2px solid #000;">';h+="		{{#images}}";h+="			{{>imgRow}}";h+="		{{/images}}";h+="	</table>";h+="{{/modules}}";var k="";k+="<tr>";k+="    <td>{{w}}</td>";k+='    <td><img src="{{s}}" /><span></span></td>';k+='    <td><img src="{{sr}}" /><span></span></td>';k+="</tr>";var g={imgRow:k};var f=Mustache.to_html(h,d,g);mywindow=window.open("","MyPopup","width=1024,height=900");$(mywindow.document.body).html(f);$(mywindow.document.body).find("img").one("load",function(){if(!$(this).hasClass("dontResize")){var m=$(this)[0].naturalWidth,o=1;if(m>600){o=1.3}if(m>700){o=2.3}if(m>1000){o=3.3}if(m>2000){o=5.3}$(this).attr("style","width:"+(m/o)+"px")}var n=urlToFilename($(this).attr("src"));$(this).attr("title",n)}).each(function(){if(this.complete){$(this).load()}})}render();